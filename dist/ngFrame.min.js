window.ngFrameModule=window.angular.module("ngFrame",["ng"]),function(a){"use strict";a.provider("$frame",function(){function a(a,b){for(var c=a+"",d="",e=0;b>e;e++)d+="0";var f=d+c;return f.substr(f.length-b)}var b,c=this,d={};d.eventCache={$frameInit:[],$frameContentChangeSuccess:[],$frameContentChangeStart:[],$frameContentChangeError:[]},d.loggerInstance=null;var e=function(){};e.prototype=[],d.names=new e,d.names.indexOf=function(a){if("string"==typeof a)return this.map(function(a){return a.frame}).indexOf(a);if("object"==typeof a&&a instanceof f){var b=Array.prototype.indexOf;return b.call(this,a)}return-1},d.names.exists=function(a){return this.indexOf(a)>-1},c.$$loggingEnabled=!1,c.$$setDebugging=function(a){c.$$loggingEnabled=!!a},c.$$setLoggerInstance=function(a){d.loggerInstance=a};var f=function(a){var b=a;Object.defineProperty(this,"name",{get:function(){return b}}),this.navigationCancel=!1,this.$scope=null,this.src=null,this.controller=null};f.prototype.$$setDirty=function(a){this.$scope=a.scope,this.src=a.src,this.controller=a.controller},f.prototype.$$isDirty=function(){return!!this.$scope},f.prototype.$$cleanup=function(){this.$scope&&(this.$scope.$destroy(),this.$scope=null)},f.prototype.$$raiseEvent=function(a){if("undefined"==typeof d.eventCache[a])throw new Error(a+": not a valid ngFrame event");c.$fire(a,this)},f.prototype.getLastError=function(){var a=this.$$error;return this.$$error=null,a},f.prototype.setNavigationCancel=function(a){this.navigationCancel=!!a},c.config={},c.config.maxNestingLevel=0,c.setMaxNestingLevel=function(a){"number"==typeof a&&(c.config.maxNestingLevel=a)},c.config.forceNameAttrUsage=!0,c.$init=function(a){var b=a,e=b.associatedScope;if(c.config.maxNestingLevel);else if(e.$$ngFrame)throw new Error("Nested ngFrame disallowed");if(c.config.forceNameAttrUsage){if(d.names[b.name])throw new Error("ngFrame with name '"+b.name+"' already exists");d.names[b.name]=b,c.$fire("$frameInit",b)}},c.$fire=function(a,c){b.$broadcast(a,c)},c.$$setRootScope=function(a){b=a},c.$destroy=function(a){c.config.forceNameAttrUsage&&(d.names[a.name]=void 0)},c.$createFrame=function(b){var e;if(c.config.forceNameAttrUsage){if(!b||0===b.length)throw new Error("ngFrame requires attribute: name");if(d.names.exists(b))throw new Error("ngFrame with name '"+b+"' already exists");e=new f(b),d.names.push(e)}else if(b&&b.length){if(d.names.exists(b))throw new Error("ngFrame with name '"+b+"' already exists");b&&0!==b.length||(b="____frame____"+a(d.names.length,3),e=new f(b),d.names.push(e))}return c.$fire("$frameInit",e),e},this.$get=function(a,b){c.$$setLoggerInstance(a("provider")),c.$$setRootScope(b);var e=function(b){var d=a(b),e={};return e.log=function(){if(c.$$loggingEnabled){var a=[].slice.call(arguments);d.log.apply(d,a)}},e},f={$config:c.config};return f.$logger=e,f.$init=function(a){c.$init(a)},f.$destroy=function(a){c.$destroy(a)},f.$$raiseEvent=function(a,b){d.eventCache[a]&&c.$fire(a,b)},f.$create=function(a){return c.$createFrame(a)},f}})}(window.ngFrameModule),function(a){"use strict";a.factory("$ngfl",["$log",function(a){var b=function(a,b){for(var c=a+"",d=c.length-b,e="",f=0;d>f;f++)e+="0";return e+c},c={length:0},d=function(a){this.name=a.toUpperCase()};d.prototype.log=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this.name),a.log.apply(a,b)};var e=function(a){var e;if(a)e=c[a],e||(c[c.length++]=c[a]=e=new d(a));else{var f="lib"+b(c.length+1);c[c.length++]=c[f]=e=new d(f)}return e};return e}])}(window.ngFrameModule),function(a){"use strict";a.directive("ngFrame",function(a,b,c,d,e,f,g){var h=function(h,i,j){var k=g.$logger("directive");if(k.log("$create"),h===f)throw new Error("Error in directive usage: cannot work on $rootScope");var l=j.src,m={src:null,controller:null,srcExp:e(j.src),ctrlExp:e(j.controller)},n=g.$create(j.name),o=function(d){return n.nav={src:d,controller:m.controller},n.$$raiseEvent("$frameContentChangeStart"),n.navigateCancel?void(n.navigateCancel=!1):void(d?(n.$$isDirty()&&(n.$$cleanup(),i.empty()),c(d).then(function(c){var e=h.$new();e.$$ngFrame=!0;try{b(m.controller,{$scope:e})}catch(f){return n.$$error=f,void n.$$raiseEvent("$frameContentChangeError")}var g=a(c)(e);i.append(g),n.$$setDirty({scope:e,src:d,controller:m.controller}),n.$$raiseEvent("$frameContentChangeSuccess")},function(a){n.$$error=a,n.$$raiseEvent("$frameContentChangeError")})):n.$$isDirty()&&(n.$$cleanup(),i.empty()))},p=function(a){m.src=a,m.controller=m.ctrlExp(h),o(a)};h.$watch(d.parseAsResourceUrl(l),p),h.$on("$destroy",function(){k.log("$destroy"),g.$destroy(n)})};return{link:h}})}(window.ngFrameModule,window.angular);